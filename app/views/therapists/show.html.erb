<% provide(:title, "Therapist Dashboard") %>

<% if flash[:notice] %>
  <div class="notice"><%= flash[:notice] %></div>
<% end %>

<div class="container therapist-profile">
    <div class="main">
      <div class="avatar">
        <img src="https://cdn0.vox-cdn.com/images/verge/default-avatar.v9899025.gif">
      </div>
      <div class="dynamic button">
        <% if patient_logged_in? %>
          <% unless patient_therapist_relationship_exists %>
            <%= form_tag({controller: "patient_therapist_relationships", action: "create"}, method: "post") do %>
              <%= hidden_field_tag 'patient_id', current_patient.id %>
              <%= hidden_field_tag 'therapist_id', params[:therapist_id] %>
              <%= hidden_field_tag 'status', "pending" %>
              <%= submit_tag "Connect with this Therapist" %>
            <% end %>
          <% end %>
          <% if connection_request_pending? %>
            Connection Request Pending
          <% elsif connection_accepted %>
            <%= link_to patient_show_conversation_path(params[:therapist_id]) do %>
              Send Message
            <% end %>
          <% end %>
        <% elsif current_therapist.id.to_i == params[:therapist_id].to_i %>
          <!-- Therapist on their own dashboard, show inbox button -->
          <%= link_to therapist_inbox_path do %>
            Inbox
          <% end %>
        <% end %>
      </div>

      <div class="basic">
        <!-- si: This is not complete, just putting this here as an idea of what I'm trying to accomplish with this view -->
        <p><%= @therapist.full_name %></p>
        <p><%= @therapist.phone %></p>
        <p><%= @therapist.email %></p>
        <p>Find City and State based on Zipcode.</p>
        <p><%= @therapist.gender %></p>
      </div>
      <div class="info">
        <p>
          <strong>Former Religion:</strong>
          <%= @therapist.former_religion %>
        </p>
        <p>
          <strong>About you:</strong>
          <%= @therapist.description %>
        </p>
      </div>
  </div>
</div>
